{"ast":null,"code":"import { BcmsListComponent } from '@feat/common/bcms-list.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@system/system.service\";\nimport * as i2 from \"@log/log.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/forms\";\nimport * as i6 from \"../../menu/menu.component\";\nimport * as i7 from \"../../sort/sort.pipe\";\nimport * as i8 from \"../log-search.pipe\";\n\nfunction LogListComponent_tr_37_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\", 10)(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵpipe(7, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"td\");\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"td\")(11, \"span\")(12, \"a\", 11);\n    i0.ɵɵtext(13, \"Detail\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(14, \"span\");\n    i0.ɵɵtext(15, \" | \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"span\")(17, \"a\", 11);\n    i0.ɵɵtext(18, \"Edit\");\n    i0.ɵɵelementEnd()()()();\n  }\n\n  if (rf & 2) {\n    const x_r1 = ctx.$implicit;\n    i0.ɵɵproperty(\"ngClass\", x_r1.lineColor);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(x_r1.id);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(x_r1.message);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(7, 7, x_r1.timestamp, \"medium\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(x_r1.severityText);\n    i0.ɵɵadvance(3);\n    i0.ɵɵpropertyInterpolate1(\"routerLink\", \"/logs/detail/\", x_r1.id, \"\");\n    i0.ɵɵadvance(5);\n    i0.ɵɵpropertyInterpolate1(\"routerLink\", \"/logs/edit/\", x_r1.id, \"\");\n  }\n}\n\nexport let LogListComponent = /*#__PURE__*/(() => {\n  class LogListComponent extends BcmsListComponent {\n    constructor(sys, logsvc) {\n      super(sys);\n      this.sys = sys;\n      this.logsvc = logsvc;\n      this.logs = [];\n      this.pageTitle = \"Log List\";\n      this.searchCriteria = '';\n      this.sortCriteria = 'id';\n      this.ascOrder = false;\n    }\n\n    addLineColor(logs) {\n      logs.forEach(log => {\n        switch (log.severity) {\n          case 0:\n            log.lineColor = \" actions log-info \";\n            log.severityText = \"Info\";\n            break;\n\n          case 1:\n            log.lineColor = \" actions log-warn \";\n            log.severityText = \"Warn\";\n            break;\n\n          case 2:\n            log.lineColor = \" actions log-error \";\n            log.severityText = \"Error\";\n            break;\n\n          case 3:\n            log.lineColor = \" actions log-fatal \";\n            log.severityText = \"Fatal\";\n            break;\n\n          case 4:\n            log.lineColor = \" actions log-trace \";\n            log.severityText = \"Trace\";\n            break;\n\n          case 5:\n            log.lineColor = \" actions log-debug \";\n            log.severityText = \"Debug\";\n            break;\n        }\n      });\n    }\n\n    refresh() {\n      this.logsvc.list().subscribe(res => {\n        this.addLineColor(res);\n        this.logs = res;\n        this.sys.log.debug(\"Logs:\", res);\n      }, err => {\n        this.sys.log.err(\"Failed to read log list:\", err);\n      });\n    }\n\n    ngOnInit() {\n      super.ngOnInit();\n      this.refresh();\n    }\n\n  }\n\n  LogListComponent.ɵfac = function LogListComponent_Factory(t) {\n    return new (t || LogListComponent)(i0.ɵɵdirectiveInject(i1.SystemService), i0.ɵɵdirectiveInject(i2.LogService));\n  };\n\n  LogListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: LogListComponent,\n    selectors: [[\"app-log-list\"]],\n    features: [i0.ɵɵInheritDefinitionFeature],\n    decls: 40,\n    vars: 10,\n    consts: [[\"routerLink\", \"/logs/create\", 1, \"\"], [\"id\", \"refresh\", 1, \"btn\", \"btn-link\", 3, \"click\"], [\"type\", \"text\", \"placeholder\", \"Search\", 1, \"searchbox\", 3, \"ngModel\", \"ngModelChange\"], [1, \"table\", \"table-sm\"], [1, \"sortable\"], [3, \"click\"], [1, \"sortable\", \"timestamp\"], [1, \"sortable\", \"severity\"], [1, \"actions\"], [3, \"ngClass\", 4, \"ngFor\", \"ngForOf\"], [3, \"ngClass\"], [1, \"\", 3, \"routerLink\"]],\n    template: function LogListComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelement(0, \"app-menu\");\n        i0.ɵɵelementStart(1, \"div\")(2, \"span\");\n        i0.ɵɵtext(3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"span\");\n        i0.ɵɵtext(5, \" | \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"span\")(7, \"a\", 0);\n        i0.ɵɵtext(8, \"Create\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(9, \"span\");\n        i0.ɵɵtext(10, \" | \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"span\")(12, \"button\", 1);\n        i0.ɵɵlistener(\"click\", function LogListComponent_Template_button_click_12_listener() {\n          return ctx.refresh();\n        });\n        i0.ɵɵtext(13, \"Refresh\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(14, \"span\");\n        i0.ɵɵtext(15, \" | \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"span\")(17, \"input\", 2);\n        i0.ɵɵlistener(\"ngModelChange\", function LogListComponent_Template_input_ngModelChange_17_listener($event) {\n          return ctx.searchCriteria = $event;\n        });\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(18, \"main\")(19, \"table\", 3)(20, \"thead\")(21, \"tr\")(22, \"td\", 4)(23, \"a\", 5);\n        i0.ɵɵlistener(\"click\", function LogListComponent_Template_a_click_23_listener() {\n          return ctx.sort(\"id\");\n        });\n        i0.ɵɵtext(24, \"Id\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(25, \"td\", 4)(26, \"a\", 5);\n        i0.ɵɵlistener(\"click\", function LogListComponent_Template_a_click_26_listener() {\n          return ctx.sort(\"message\");\n        });\n        i0.ɵɵtext(27, \"Message\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(28, \"td\", 6)(29, \"a\", 5);\n        i0.ɵɵlistener(\"click\", function LogListComponent_Template_a_click_29_listener() {\n          return ctx.sort(\"timestamp\");\n        });\n        i0.ɵɵtext(30, \"Timestamp\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(31, \"td\", 7)(32, \"a\", 5);\n        i0.ɵɵlistener(\"click\", function LogListComponent_Template_a_click_32_listener() {\n          return ctx.sort(\"severityText\");\n        });\n        i0.ɵɵtext(33, \"Severity\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(34, \"td\", 8);\n        i0.ɵɵtext(35, \"Actions\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(36, \"tbody\");\n        i0.ɵɵtemplate(37, LogListComponent_tr_37_Template, 19, 10, \"tr\", 9);\n        i0.ɵɵpipe(38, \"sort\");\n        i0.ɵɵpipe(39, \"logSrch\");\n        i0.ɵɵelementEnd()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate(ctx.pageTitle);\n        i0.ɵɵadvance(14);\n        i0.ɵɵproperty(\"ngModel\", ctx.searchCriteria);\n        i0.ɵɵadvance(20);\n        i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind3(38, 3, i0.ɵɵpipeBind2(39, 7, ctx.logs, ctx.searchCriteria), ctx.sortCriteria, ctx.ascOrder));\n      }\n    },\n    dependencies: [i3.NgClass, i3.NgForOf, i4.RouterLinkWithHref, i5.DefaultValueAccessor, i5.NgControlStatus, i5.NgModel, i6.MenuComponent, i3.DatePipe, i7.SortPipe, i8.LogSearchPipe],\n    styles: [\"button#refresh[_ngcontent-%COMP%]{padding:0}tr.log-info[_ngcontent-%COMP%]{background-color:transparent}tr.log-warn[_ngcontent-%COMP%]{background-color:#ffa}tr.log-error[_ngcontent-%COMP%]{background-color:#ffedcc}tr.log-fatal[_ngcontent-%COMP%]{background-color:#fcc}tr.log-trace[_ngcontent-%COMP%], tr.log-debug[_ngcontent-%COMP%]{background-color:transparent}td.actions[_ngcontent-%COMP%]{width:110px}td.severity[_ngcontent-%COMP%]{width:80px}td.timestamp[_ngcontent-%COMP%]{width:220px}\"]\n  });\n  return LogListComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}