{"ast":null,"code":"import { BcmsComponent } from '@feat/common/bcms.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@system/system.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@feat/user/user.service\";\nimport * as i4 from \"../attendance.service\";\nimport * as i5 from \"../../../core/menu/menu.component\";\nexport let AttendanceMenuCheckinoutComponent = /*#__PURE__*/(() => {\n  class AttendanceMenuCheckinoutComponent extends BcmsComponent {\n    constructor(sys, route, usersvc, attendsvc) {\n      super(sys);\n      this.sys = sys;\n      this.route = route;\n      this.usersvc = usersvc;\n      this.attendsvc = attendsvc;\n      this.checkedIn = false;\n      this.cohortId = 0;\n    }\n    /*\r\n      TTD: This component will be called from the menu so the student can\r\n            check in/out when logging on themselves. It should retrieve\r\n            the logged in user to get the student id. It should get the\r\n            cohort id that the student is currently enrolled in. It should\r\n            get whether the student is currently checked in or not. Then\r\n            is should navigate to the attendance-student.component.\r\n    */\n\n\n    getIsCheckedIn(cohortId, studentId) {\n      let isCheckedIn;\n      this.attendsvc.ischeckedin(cohortId, studentId).subscribe(res => {\n        this.checkedIn = res != null;\n        this.route.navigateByUrl(`/attendance/pincode/${studentId}/${this.cohortId}/${this.checkedIn}`);\n      }, err => {\n        this.sys.log.err(err);\n      });\n    }\n\n    getActiveCohortForStudent(studentId) {\n      this.usersvc.getActiveCohortByUserId(studentId).subscribe(res => {\n        this.cohortId = res.cohortId;\n        let msg = `Student ${res.studentId} ${res.studentLastname} currently enrolled in cohort ${res.cohortId} ${res.cohortName}`;\n        this.sys.log.debug(msg);\n        this.getIsCheckedIn(this.cohortId, studentId);\n      }, err => {\n        this.sys.log.err(err);\n      });\n    }\n\n    ngOnInit() {\n      super.ngOnInit();\n      this.getActiveCohortForStudent(this._loggedInUser.id);\n    }\n\n  }\n\n  AttendanceMenuCheckinoutComponent.ɵfac = function AttendanceMenuCheckinoutComponent_Factory(t) {\n    return new (t || AttendanceMenuCheckinoutComponent)(i0.ɵɵdirectiveInject(i1.SystemService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.UserService), i0.ɵɵdirectiveInject(i4.AttendanceService));\n  };\n\n  AttendanceMenuCheckinoutComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AttendanceMenuCheckinoutComponent,\n    selectors: [[\"app-attendance-menu-checkinout\"]],\n    features: [i0.ɵɵInheritDefinitionFeature],\n    decls: 3,\n    vars: 0,\n    template: function AttendanceMenuCheckinoutComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelement(0, \"app-menu\");\n        i0.ɵɵelementStart(1, \"p\");\n        i0.ɵɵtext(2, \"attendance-menu-checkinout works!\");\n        i0.ɵɵelementEnd();\n      }\n    },\n    dependencies: [i5.MenuComponent]\n  });\n  return AttendanceMenuCheckinoutComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}